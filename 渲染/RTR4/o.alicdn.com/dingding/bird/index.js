!function(e){var n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(n){return e[n]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=7)}([function(e,n,t){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,c)}s((r=r.apply(e,n||[])).next())}))},i=this&&this.__generator||function(e,n){var t,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(t=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=n.call(e,a)}catch(e){c=[6,e],r=0}finally{t=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}};Object.defineProperty(n,"__esModule",{value:!0}),n.safetyCall=n.decode=n.ignoreByRule=n.checkAutoError=n.isType=n.serializeLog=n.bindEvent=n.toQueryParams=n.getCookie=n.genRandId=n.processError=n.getBridge=n.getPlatform=n.pageAccessedByReload=n.isMobile=n.isPC=n.isIOS=n.isAndroid=n.isWin=n.isMac=n.isDingTalkRuntime=n.stringify=n.ECustomLogType=n.ELogType=n.getConfigs=n.getConfig=n.compareVersion=n.compareCurrentVersion=n.setPerfData=n.setConfig=n.inAutoFmpWhitelist=n.inWhitelist=n.isCrawlerUa=n.getUid=n.checkSamplingWhiteList=n.getUserInfoOpen=n.getNativeOrgMap=n.checkBlank=n.getNativeInfoMap=n.executeWithIntervalSync=n.trackProperty=n.mergeConfig=n.getCurrentLanguage=n.getDingTalkEnv=n.env=n.win=n.checkSampling=n.createDingtalkApiCall=void 0;var a=t(4),c=t(1),s=t(2),l=t(10),u=t(11),f=t(14),d=t(17),p=t(20),m=t(21),g=window.navigator.userAgent;n.createDingtalkApiCall=function(e){var t=e.apiName,r=e.processResult;return new Promise((function(e){var o,i={};if(void 0!==n.win.dingtalk&&(null===(o=n.win.dingtalk.platform)||void 0===o?void 0:o.invokeAPI)){var a=(new Date).getTime(),s=function(n){var o=(n||{}).data,u=void 0===o?{}:o,f=u.msgId,d=u.body;f===a&&(window.removeEventListener("message",s),i=r(d),e(i),c.consola.log(t,d,i),clearTimeout(l))};window.addEventListener("message",s);var l=setTimeout((function(){window.removeEventListener("message",s),e({})}),2e3);window.dingtalk.platform.invokeAPI(a,t,{})}else e(i)}))};n.checkSampling=function(){var e,t=(0,n.getPlatform)();if("prod"!==n.env)return!0;var r=(null===(e=null===n.win||void 0===n.win?void 0:n.win.__BIRD_CONFIG)||void 0===e?void 0:e.sampling)||s.DEFAULT_SAMPLING;return t===a.ENV_ENUM.mac&&(r=(r*=10)>=1?1:r),n.win.__BIRD&&n.win.__BIRD.setConfig&&n.win.__BIRD.setConfig({sampling:r}),!(Math.random()>=r)||(c.consola.log("bird.core sampling not satisfy [END]"),!1)},n.win=window||{},n.env=/(daily|pre)-/.test(location.hostname)||/bird_debug=1/.test(location.href)?"pre":"prod";n.getDingTalkEnv=function(){return new Promise((function(e,t){void 0!==n.win.dingtalk&&n.win.dingtalk.app&&n.win.dingtalk.app.getNetworkEnv?(n.win.dingtalk.app.getNetworkEnv((function(n,t){var r=(t||{}).networkEnvType,o=void 0===r?"":r;e("string"==typeof o?o.toLowerCase():null)})),setTimeout((function(){e(null)}),2e3)):e(null)}))};n.getCurrentLanguage=function(){var e;if(!e&&window.navigator&&window.navigator.userAgent){var n=navigator.userAgent.match(/language\/(\S+)/i);n&&n[1]&&(e=n[1])}return!e&&navigator.language&&(e=navigator.language),e||""};n.mergeConfig=function(e){var t=r({},e);if(n.win.__BIRD_CONFIG)for(var o in n.win.__BIRD_CONFIG)"[object Object]"===Object.prototype.toString.call(n.win.__BIRD_CONFIG[o])?t[o]=Object.assign({},t[o],n.win.__BIRD_CONFIG[o]):t[o]=n.win.__BIRD_CONFIG[o];return t};n.trackProperty=function(e,t){try{var r={};"function"==typeof e&&e().then((function(e){r=e||{},Object.keys(r).forEach((function(e){var o;if(void 0!==e&&void 0!==r[e]){var i=r[e];n.win.__BIRD&&n.win.__BIRD.setConfig&&n.win.__BIRD.setConfig(((o={})[t||e]=i,o))}}))}))}catch(e){c.consola.error("core.api.trackProperty.error",e)}},n.executeWithIntervalSync=function(e,n,t,r){void 0===t&&(t=1e3),void 0===r&&(r=3);var o=0,i=function(){try{if(e(n))return}catch(e){}++o<r&&setTimeout(i,t)};i()};n.getNativeInfoMap=function(e){var n={};try{var t=e||{},r=t.status,o=t.hit,i=void 0===o?{}:o,a=t.bizData,s=void 0===a?{}:a,l=t.detail,u=void 0===l?{}:l,f=t.resourceList;if(r){var d=i.total,p=void 0===d?0:d,m=i.local,g=void 0===m?0:m,v=i.mainTotal,h=void 0===v?0:v,_=i.mainLocal,w=void 0===_?0:_,y=i.resourceList,b=s.assetVersion,E=s.developVersion,T=u.version,C=u.reason,O=void 0===C?"":C;n.ctmEnabled=r,n.ctmReason=O;var P=0===p?0:parseInt(g)/parseInt(p),I=0===h?0:parseInt(w)/parseInt(h);n.ctmHitRate=Math.floor(100*P),n.ctmMainRate=Math.floor(100*I),n.ctmVersion=b,n.ctmDevelopVersion=E||T;var M=f||y;"string"==typeof y&&(M=JSON.parse(y)),Array.isArray(M)&&(n.resourceList=M.filter((function(e){var n;return 0==(null===(n=null==e?void 0:e.payload)||void 0===n?void 0:n.hit)})).map((function(e){var n;return null===(n=null==e?void 0:e.payload)||void 0===n?void 0:n.url})).join(",")),n.ctmTotal=p,n.ctmLocal=g}}catch(e){c.consola.error("core.api.getNativeInfoMap.error",e)}return n};n.checkBlank=function(){return!(document.body.innerText||"").replace(/\s/g,"")};n.getNativeOrgMap=function(e){var n={};try{var t=(e||{}).organizations;if(t){var r=t.map((function(e){return e.corpId}));n.corpIds=r.join(",")}}catch(e){c.consola.error("core.api.getNativeOrgMap.error",e)}return n};n.getUserInfoOpen=function(e){try{e||{}}catch(e){c.consola.error("core.api.getUserInfoOpen.error",e)}return e};n.checkSamplingWhiteList=function(){var e=(0,n.getConfig)("corpIds")||[];return!!s.innerWhiteList.some((function(n){return e.includes(n)}))};n.getUid=function(){return o(void 0,void 0,void 0,(function(){var e,t,r,o,a,l,p,m,g;return i(this,(function(i){switch(i.label){case 0:e=(0,n.getPlatform)(),i.label=1;case 1:return i.trys.push([1,9,,10]),(0,n.inWhitelist)(location.href)&&n.isDingTalkRuntime?(l=s.FetchUserInfoMethods[e],"function"!=typeof(p=u.default[l])||(0,n.getConfig)("uid")&&(0,n.getConfig)("username")?[3,3]:[4,p()]):[3,6];case 2:m=i.sent()||{},console.log("uid",m.dt_uid,m.name),m.dt_uid&&(0,n.setConfig)("uid",m.dt_uid),m.name&&((0,n.setConfig)("username",m.name),(0,n.setConfig)("name",m.name)),i.label=3;case 3:return t=s.FetchUserOrgMethods[e],"function"!=typeof(r=d.default[t])||(0,n.getConfig)("corpIds")?[3,5]:[4,r()];case 4:o=i.sent()||{},a={},o.corpIds&&(s.innerBucketList.forEach((function(e){o.corpIds.includes(e)&&(a[s.innerBucketMap[e]]=!0)})),(0,n.setConfig)("corpIds",o.corpIds),(0,n.setConfig)("fmp_others",Object.assign({},(0,n.getConfig)("fmp_others"),{bucketMap:a}))),i.label=5;case 5:return[3,8];case 6:return n.isDingTalkRuntime?(l=s.FetchUserInfoOpenMethods[e],"function"!=typeof(p=f.default[l])?[3,8]:[4,p()]):[3,8];case 7:(m=i.sent()||{}).emplId&&(0,n.setConfig)("uid",m.emplId),m.nickName&&((0,n.setConfig)("username",m.nickName),(0,n.setConfig)("name",m.nickName)),(0,n.setConfig)("corpIds",m.corpId),i.label=8;case 8:return[3,10];case 9:return g=i.sent(),c.consola.error("core.api.getUid.error",g),[3,10];case 10:return[2]}}))}))};n.isCrawlerUa=function(){return g.indexOf("spider")>-1};n.inWhitelist=function(e){return s.INNER_APP_LIST.some((function(n){return e.indexOf(n)>-1}))};n.inAutoFmpWhitelist=function(e){return s.AUTO_FMP_LIST.some((function(n){return e.indexOf(n)>-1}))};n.setConfig=function(e,t){var r;n.win.__BIRD&&n.win.__BIRD.setConfig&&n.win.__BIRD.setConfig(((r={})[e]=t,r))};n.setPerfData=function(e){n.win.__BIRD_perf_data=r(r({},n.win.__BIRD_perf_data),e)};function v(e,n){function t(e){return parseInt(e,10)||0}for(var r=e.split(".").map(t),o=n.split(".").map(t),i=0;i<r.length;i++){if(void 0===o[i])return!0;if(r[i]<o[i])return!1;if(r[i]>o[i])return!0}return!0}n.compareCurrentVersion=function(e){var n,t=window.navigator.userAgent,r=t.match(/AliApp\(\w+\/([a-zA-Z0-9.-]+)\)/);return r||(r=t.match(/DingTalk\/([a-zA-Z0-9.-]+)/)||t.match(/DingTalk\(([a-zA-Z0-9\.-]+)\)/)),r&&r[1]&&(n=r[1]),v(n,e)},n.compareVersion=v;n.getConfig=function(e){return n.win.__BIRD_CONFIG&&n.win.__BIRD_CONFIG[e]};n.getConfigs=function(){return n.win.__BIRD_CONFIG},function(e){e.PV="pv",e.PERF="perf",e.PERF_SUB="perf_sub",e.ERROR="error",e.RESOURCE="resource_error",e.API="api",e.CUSTOM="custom",e.EVENT="event",e.SPEED="speed",e.CALC="calc"}(n.ELogType||(n.ELogType={})),function(e){e.LEAVE="leave",e.PERF_ADVANCED="perf_advanced",e.BLANK="blank",e.LONG_TASK="long_task",e.CUSTOM="custom",e.AUTO_FMP="auto_fmp"}(n.ECustomLogType||(n.ECustomLogType={}));n.stringify=function(e,n){var t=(n||{}).removeNode,r=void 0!==t&&t,o=[],i=JSON.stringify(e,(function(e,n){if("object"==typeof n&&null!==n){if(-1!==o.indexOf(n))return;if(r&&n.nodeType)return;o.push(n)}return n}));return o=null,i},n.isDingTalkRuntime=/DingTalk/i.test(g),n.isMac=g.indexOf("Macintosh; Intel Mac OS")>-1,n.isWin=-1!==g.indexOf("Win"),n.isAndroid=Boolean(g.match(/android/i)),n.isIOS=Boolean(g.match(/(iphone|ipod|ipad)/i)),n.isPC=n.isMac||n.isWin,n.isMobile=n.isAndroid||n.isIOS;n.pageAccessedByReload=function(){return!n.win.performance.getEntriesByType||(n.win.performance.getEntriesByType("navigation")||[]).map((function(e){return e.type})).includes("reload")};n.getPlatform=function(){return n.isIOS?a.ENV_ENUM.ios:n.isWin?a.ENV_ENUM.win:n.isAndroid?a.ENV_ENUM.android:n.isMac?a.ENV_ENUM.mac:a.ENV_ENUM.other};n.getBridge=function(){var e=function(e,n){return Promise.resolve({})},t=(0,n.getPlatform)();return t===a.ENV_ENUM.ios?e=p.default:t===a.ENV_ENUM.android&&(e=m.default),e};n.processError=function(e){return"undefined"!=typeof PromiseRejectionEvent&&e instanceof PromiseRejectionEvent?(0,l.processUnhandleDrejection)(e)||{}:(0,l.processCommonError)(e)||{}};n.genRandId=function(){return"".concat(function(e){var n=e&&e.length||0,t=0,r=0,o=0,i=0,a=0;if(n>0){for(r^=65535&e.charCodeAt(i++),n-=o=n+o&3;t=5*(t=(t^=r=13715*(r=(r=11601*r+3432906752*(65535&r)&4294967295)<<15|r>>>17)+461832192*(65535&r)&4294967295)<<13|t>>>19)+3864292196&4294967295,!(i>=n);)r=65535&e.charCodeAt(i++)^(65535&e.charCodeAt(i++))<<8^(65535&e.charCodeAt(i++))<<16,r^=(255&(a=e.charCodeAt(i++)))<<24^(65280&a)>>8;switch(r=0,o){case 3:r^=(65535&e.charCodeAt(i+2))<<16;break;case 2:r^=(65535&e.charCodeAt(i+1))<<8;break;case 1:r^=65535&e.charCodeAt(i)}return r>0&&(t^=r=13715*(r=(r=11601*r+3432906752*(65535&r)&4294967295)<<15|r>>>17)+461832192*(65535&r)&4294967295),t^=n,t=51819*(t^=t>>>16)+2246770688*(65535&t)&4294967295,t=44597*(t^=t>>>13)+3266445312*(65535&t)&4294967295,(t^=t>>>16)>>>0}return""}(location.href.split("?")[0])).concat(String("xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx").replace(/[xy]/g,(function(e){var n=16*Math.random()|0;return("x"===e?n:3&n|8).toString(16)}))).concat((new Date).getTime())};n.getCookie=function(e){var n=document.cookie.match(new RegExp("(^| )".concat(e,"=([^;]*)(;|$)")));return n?unescape(n[2]):null};n.toQueryParams=function(e){var n=[];for(var t in e)t&&n.push("".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(e[t])));return n.join("&")},n.bindEvent=function(e,n,t,r,o){if(e.addEventListener){var i=function(a){r&&e.removeEventListener(n,i,o),t.call(this,a)};return o=o||!1,e.addEventListener(n,i,o),function(){e.removeEventListener(n,i,o)}}if(e.attachEvent){var a=function(o){r&&e.detachEvent("on"+n,a),t.call(this,o)};return e.attachEvent("on"+n,a),function(){e.detachEvent("on"+n,a)}}};function h(e,n){var t=Object.prototype.toString.call(e).substring(8).replace("]","");return n?t===n:t}function _(e,n,t){if("function"!=typeof e)return t;try{return e.apply(this,n)}catch(e){return t}}n.serializeLog=function(e,n){var t={};for(var r in n)e[r]?t[e[r]]=n[r]||"":t[r]=n[r]||"";return t},n.isType=h,n.checkAutoError=function(e){return!(!e||!e.message)&&!/failed[\w\s]+fetch/i.test(e.message)},n.ignoreByRule=function(e,n,t){if(!e||!t)return!1;if(("String"===h(t)||t.source||"Function"===h(t))&&(t=[t]),"Array"!==h(t))return console.warn("[arms] invalid rules of ignore config, (list of) String/RegExp/Funcitons are available"),!1;for(var r,o=[],i=0,a=t.length;i<a;i++)if("String"===h(r=t[i]))o.push(r.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1"));else if(r&&r.source)o.push(r.source);else if(r&&"Function"===h(r)&&!0===_(r,[e,n],!1))return!0;var c=new RegExp(o.join("|"),"i");return!!(o.length&&c.test&&c.test(e))},n.decode=function(e){try{e=decodeURIComponent(e)}catch(e){}return e},n.safetyCall=_},function(e,n,t){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,c)}s((r=r.apply(e,n||[])).next())}))},i=this&&this.__generator||function(e,n){var t,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(t=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=n.call(e,a)}catch(e){c=[6,e],r=0}finally{t=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}},a=this&&this.__rest||function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)n.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(t[r[o]]=e[r[o]])}return t},c=this&&this.__spreadArray||function(e,n,t){if(t||2===arguments.length)for(var r,o=0,i=n.length;o<i;o++)!r&&o in n||(r||(r=Array.prototype.slice.call(n,0,o)),r[o]=n[o]);return e.concat(r||Array.prototype.slice.call(n))};Object.defineProperty(n,"__esModule",{value:!0}),n.consola=void 0;var s=t(0),l=t(2),u=function(){},f=window.console;function d(e,n){n.__href__=window.location.href;var t={__logs__:[n]},r="https://".concat("bird",".").concat("cn-hangzhou.log.aliyuncs.com","/logstores/").concat(e,"/track");if(navigator&&navigator.sendBeacon)return navigator.sendBeacon("".concat(r,"?APIVersion=0.6.0"),(0,s.stringify)(t))}f||(f={log:u,info:u,warn:u,error:u}),n.consola={log:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];"pre"===s.env&&f.info.apply(f,c(["[".concat("Bird","-").concat(Date.now(),"]")],e,!1))},clog:function(e,n){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];"pre"===s.env&&f.info.apply(f,c(["[".concat("Bird","]%c ").concat(e),n],t,!1))},info:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];f.info.apply(f,c(["[".concat("Bird","]")],e,!1))},warn:function(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];f.warn.apply(f,c(["[".concat("Bird","]"),e],n,!1))},error:function(e,n){f.error("[".concat("Bird","] ").concat(e),n),function(e,n,t){d("bird-warn",{errorCode:e,ua:navigator.userAgent,os:(0,s.getPlatform)(),uid:(0,s.getConfig)("uid"),version:(0,s.getConfig)("version"),birdVersion:l.BIRD_VERSION,stack:(0,s.stringify)(n),message:(0,s.stringify)(t)})}(e,n&&n.stack||n,n&&n.message)},track:function(e,n){!function(e,n){n.os,n.url,n.resource;var t=a(n,["os","url","resource"]);d("bird-perf",{code:e,os:n.os,url:n.url,fmp:JSON.stringify(n.fmp),native_total_time:JSON.stringify(n.nativeTotalTime),ua:navigator.userAgent,resource:n.resource,uid:(0,s.stringify)(n.uid),info:(0,s.stringify)(t)})}(e,n)},custom:function(e,n){return o(this,void 0,void 0,(function(){var t;return i(this,(function(o){switch(o.label){case 0:return(t=(0,s.getConfigs)()).uid?[3,2]:[4,(0,s.getUid)()];case 1:o.sent(),t.uid=(0,s.getConfig)("uid"),o.label=2;case 2:return t.ua=navigator.userAgent,t.os=(0,s.getPlatform)(),t.birdVersion=l.BIRD_VERSION,t.version=(0,s.getConfig)("version"),function(e,n){d(e,n)}(e,r({extra:JSON.stringify(t)},n)),[2]}}))}))}}},function(e,n,t){"use strict";var r,o,i,a,c;Object.defineProperty(n,"__esModule",{value:!0}),n.INNER_APP_LIST=n.AUTO_FMP_LIST=n.LOG_MAP=n.LOG_MAP_ERROR=n.LOG_MAP_CUSTOM=n.EXTRA_OTHERS_KEY=n.innerBucketMap=n.innerBucketList=n.innerGrayList=n.innerWhiteList=n.LOG_MAP_STRINGIFY=n.LOG_MAP_BLANK=n.FMP_KEYS_FIRST=n.FMP_KEYS_LOADED=n.FMP_KEYS=n.FMP_KEYS_OTHERS=n.DEFAULT_SAMPLING_RESOURCE=n.DEFAULT_SAMPLING=n.BIRD_VERSION=n.LOG_COMMON_PID=n.FetchUserOrgMethods=n.FetchUserInfoOpenMethods=n.FetchUserInfoMethods=n.FetchNativeInfoMethods=n.FetchNativeTimeMethods=void 0;var s=t(4);n.FetchNativeTimeMethods=((r={})[s.ENV_ENUM.ios]="fetchH5MobileNativeTime",r[s.ENV_ENUM.android]="fetchH5MobileNativeTime",r[s.ENV_ENUM.mac]="fetchH5PcNativeTime",r[s.ENV_ENUM.win]="fetchH5PcNativeTime",r),n.FetchNativeInfoMethods=((o={})[s.ENV_ENUM.ios]="fetchH5MobileResourceInfo",o[s.ENV_ENUM.android]="fetchH5MobileResourceInfo",o[s.ENV_ENUM.mac]="fetchH5PcResourceInfo",o[s.ENV_ENUM.win]="fetchH5PcResourceInfo",o),n.FetchUserInfoMethods=((i={})[s.ENV_ENUM.ios]="fetchH5MobileUserInfo",i[s.ENV_ENUM.android]="fetchH5MobileUserInfo",i[s.ENV_ENUM.mac]="fetchH5PcUserInfo",i[s.ENV_ENUM.win]="fetchH5PcUserInfo",i),n.FetchUserInfoOpenMethods=((a={})[s.ENV_ENUM.ios]="fetchH5MobileUserOpenInfo",a[s.ENV_ENUM.android]="fetchH5MobileUserOpenInfo",a[s.ENV_ENUM.mac]="fetchH5PcUserOpenInfo",a[s.ENV_ENUM.win]="fetchH5PcUserOpenInfo",a),n.FetchUserOrgMethods=((c={})[s.ENV_ENUM.ios]="fetchH5MobileUserOrg",c[s.ENV_ENUM.android]="fetchH5MobileUserOrg",c[s.ENV_ENUM.mac]="fetchH5PcUserOrg",c[s.ENV_ENUM.win]="fetchH5PcUserOrg",c),n.LOG_COMMON_PID="ding-lighting-perf",n.BIRD_VERSION="0.107",n.DEFAULT_SAMPLING=.1,n.DEFAULT_SAMPLING_RESOURCE=.05,n.FMP_KEYS_OTHERS=["fmp_t3","fmp_t4","fmp_t5","fmp_t6","fmp_t7","fmp_t8","fmp_t9","fmp_t10","fmp_t11","fmp_t12","fmp_t13","fmp_t14","fmp_t15"],n.FMP_KEYS=["FMP","fmp_t0","fmp_t1","fmp_t2","fmp-custom","fmp-every"].concat(n.FMP_KEYS_OTHERS),n.FMP_KEYS_LOADED=["fmp-end"],n.FMP_KEYS_FIRST=["fmp-custom","FMP","fmp-every"],n.LOG_MAP_BLANK=["msg","ctmEnabled","ctmVersion"],n.LOG_MAP_STRINGIFY=["fmp_others"],n.innerWhiteList=["dingd8e1123006514592","ding46b6100f4b850c67","ding497e6a00d62c249c4ac5d6980864d335"],n.innerGrayList=["dingfa56730abc1908a9a39a90f97fcb1e09","ding46b6100f4b850c67","ding497e6a00d62c249c4ac5d6980864d335"],n.innerBucketList=["ding46b6100f4b850c67","ding8196cd9a2b2405da24f2f5cc6abecb85"],n.innerBucketMap={ding46b6100f4b850c67:"iTeam",ding8196cd9a2b2405da24f2f5cc6abecb85:"dingtalk"},n.EXTRA_OTHERS_KEY=["appColdStartDuration","memoryUsage","cpuUsage","coldOpen","prerender","precreate","deviceModel","lowPowerMode","lowEndDevice","timeline","offline_version","online_version","ctmUpdateManage","ctmReason","ctmDevelopVersion","resourceList","initStartTime","initEndTime","beforeNavigateTime","finalRedirectTime","redirectTime","RuntimeLaunchTime","RuntimeStartLoadTime"],n.LOG_MAP_CUSTOM={fmp:"p3",ctmHitRate:"c7",ctmEnabled:"c6",fmp_t0:"c5",fmp_t1:"c4",fmp_t2:"c3",fmp_others:"c1",ctmVersion:"c2",msg:"msg"},n.LOG_MAP_ERROR={file:"p1",lineno:"p2",colno:"p3",stack:"p4",errType:"p5",errCode:"p6",stack1:"c1",stack2:"c2",stack3:"c3",msg:"msg"},n.LOG_MAP={fp:"p1",fcp:"p2",fmp:"p3",startTime:"p4",unloadEventStart:"p5",unloadEventEnd:"p6",redirectStart:"p7",redirectEnd:"p8",fetchStart:"p9",domainLookupStart:"p10",domainLookupEnd:"p11",connectStart:"p12",secureConnectionStart:"p13",connectEnd:"p14",requestStart:"p15",responseStart:"p16",responseEnd:"p17",domInteractive:"p18",domContentLoadedEventStart:"p19",domContentLoadedEventEnd:"p20",domComplete:"p21",loadEventStart:"p22",loadEventEnd:"p23",fmpGap:"p24",resource:"p25",nativeTotalTime:"c10",beforeNavigateTime:"c9",ctmMainRate:"c8",ctmHitRate:"c7",ctmEnabled:"c6",fmp_t0:"c5",fmp_t1:"c4",fmp_t2:"c3",fmp_others:"c1",ctmVersion:"c2",msg:"msg"},n.AUTO_FMP_LIST=["file://","app://","cmpkg.dingtalk.com","n.dingtalk.com","www.dingtalk.com","login.dingtalk.com","oa.dingtalk.com"],n.INNER_APP_LIST=[".dingtalk.com","app://","file://","teambition.alibaba-inc.com","webmail.alibaba-inc.com"]},function(e,n,t){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e}).apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0}),n.log=void 0;var o=t(0),i=t(1),a=t(22),c=(0,o.genRandId)(),s=(0,o.genRandId)();n.log=function(e,n){var t=window||{},l=t.document||{},u=t.navigator||{},f=t.location||{},d=(new Date).getTime(),p=t.__BIRD_CONFIG||{},m=p.pageName,g=void 0===m?"":m,v=p.title,h=void 0===v?"":v,_=p.pageHash,w=void 0===_?"":_,y=encodeURIComponent((0,o.getCookie)("pub_uid")||""),b=encodeURIComponent(f.href),E=encodeURIComponent(f.href.split("?")[0]),T=encodeURIComponent(f.search&&f.search.replace("?","")||""),C=encodeURIComponent(f.hash&&f.hash.replace("#","")||""),O=encodeURIComponent(g||h||l.title),P=encodeURIComponent(g||h),I=encodeURIComponent(w),M=encodeURIComponent(l.referrer),S=encodeURIComponent((0,o.getPlatform)()),k=encodeURIComponent(document.visibilityState),N=encodeURIComponent(u.userAgent||""),R="".concat(t.devicePixelRatio||1),L=t.screen&&encodeURIComponent("".concat(t.screen.width,"x").concat(t.screen.height))||"",x=u.connection?encodeURIComponent(u.connection.effectiveType||u.connection.type||""):"",A=(new Date).getTime(),B=r({type:e,sid:c,env:o.env,logtime:String(A),delay:String((A-d)/1e3),uid:y,pv_id:s,origin_url:b,url:E,referrer:M,app_name:P,spm_a:I,title:O,visible:k,query:T,hash:C,ua:N,dpr:R,os:S,sr:L,net_type:x},n);i.consola.log("send",B),(0,a.logArms)(e,B)}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ENV_ENUM=void 0,function(e){e.win="win",e.mac="mac",e.android="android",e.ios="ios",e.other="other"}(n.ENV_ENUM||(n.ENV_ENUM={}))},function(e,n,t){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,c)}s((r=r.apply(e,n||[])).next())}))},i=this&&this.__generator||function(e,n){var t,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(t=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=n.call(e,a)}catch(e){c=[6,e],r=0}finally{t=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}};Object.defineProperty(n,"__esModule",{value:!0}),n.logCustom=void 0;var a=t(3),c=t(0),s=t(1),l=t(2);n.logCustom=function(e,n,t){return void 0===t&&(t=null),o(void 0,void 0,void 0,(function(){var o,u,f;return i(this,(function(i){switch(i.label){case 0:return[4,(0,c.getUid)()];case 1:for(f in i.sent(),o=(0,c.mergeConfig)(n),l.LOG_MAP_CUSTOM)void 0!==o[f]&&null!==o[f]&&"object"==typeof o[f]&&(o[f]=JSON.stringify(o[f]));try{s.consola.track(t?"core.log.".concat(t):"core.log.custom",r(r(r(r({},c.win.__BIRD_perf_data),c.win.__BIRD_CONFIG),{birdVersion:l.BIRD_VERSION}),o))}catch(e){s.consola.error("core.api.logSlsCustom.error",e)}try{for(f in u={},n)n[f]&&(u[f]=encodeURIComponent("".concat(n[f])));(0,a.log)(t||c.ELogType.CUSTOM,r({pid:e},u))}catch(e){console.error("core.api.sendLeaveLog.error",e)}return[2]}}))}))}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t(1),o=t(0);n.default=function(e,n,t){return new Promise((function(e,i){var a,c;o.win.dingtalk&&o.win.dingtalk.graySwitchLemon&&o.win.dingtalk.graySwitchLemon.stringValueForModuleKeyV3?null===(c=null===(a=o.win.dingtalk)||void 0===a?void 0:a.graySwitchLemon)||void 0===c||c.stringValueForModuleKeyV3(n,t,(function(n,o){n&&r.consola.error("internal.util.graySwitchLemonPC ".concat(t),n),r.consola.log("internal.util.graySwitchLemonPC",t,o),e("true"===o||"1"===o)})):(0,o.getBridge)()("internal.util.graySwitchLemon",{module:n,key:t,default:!1}).then((function(n){r.consola.log("internal.util.graySwitchLemonMobile",t,n),e(n)}),(function(e){r.consola.error("internal.util.graySwitchLemonMobile ".concat(t),e)}));setTimeout((function(){e(!1)}),2e3)}))}},function(e,n,t){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,c)}s((r=r.apply(e,n||[])).next())}))},i=this&&this.__generator||function(e,n){var t,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(t=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=n.call(e,a)}catch(e){c=[6,e],r=0}finally{t=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}};Object.defineProperty(n,"__esModule",{value:!0}),n.setCommonValue=void 0;var a=t(8),c=t(23),s=t(26),l=t(33),u=t(35),f=t(0),d=t(2),p=t(1),m=t(6);f.win.__BIRD_CONFIG=f.win.__BIRD_CONFIG||{},f.win.__BIRD_perf_data={};var g=d.LOG_COMMON_PID,v=(0,f.getConfig)("errorPid"),h=(0,f.getConfig)("ignoreErrors")||[/^Script error\.?$/,/^ResizeObserver loop limit exceeded\.?$/],_=function(e){f.win.__BIRD_CONFIG=r(r({},f.win.__BIRD_CONFIG),e)};n.setCommonValue=_;try{!function(){if(!f.win.__BIRD_inited){if(f.win.__BIRD_inited=!0,f.win.__BIRD={setCommonValue:_,setConfig:_,sendToSls:p.consola.custom},(null===(e=null===f.win||void 0===f.win?void 0:f.win.__DINGBASE_OFFLINE_CONFIG__)||void 0===e?void 0:e.version)?((0,f.setConfig)("version",f.win.__DINGBASE_OFFLINE_CONFIG__.version),(0,f.setConfig)("offline_version",f.win.__DINGBASE_OFFLINE_CONFIG__.version)):(null===(n=null===f.win||void 0===f.win?void 0:f.win.__DINGBASE_CONFIG__)||void 0===n?void 0:n.version)&&((0,f.setConfig)("version",f.win.__DINGBASE_CONFIG__.version),(0,f.setConfig)("online_version",f.win.__DINGBASE_CONFIG__.version)),(0,f.checkSampling)()||(0,f.setConfig)("send",!1),!(null===window||void 0===window?void 0:window.performance))return;if((0,f.isCrawlerUa)())return;p.consola.log("bird.core ".concat(f.env," start success")),(0,c.initLogError)(v,g,h),(0,a.initLogPerf)(g),(0,l.initLogPerfAdvanced)(g),(0,s.initLogNative)(g),setTimeout((function(){o(void 0,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,(0,m.default)("","im","im_bird_upload_user_visit")];case 1:return e.sent()&&(0,u.default)(),[2]}}))}))}),500)}var e,n}()}catch(e){p.consola.error("core.api.start.error",e)}},function(e,n,t){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,c)}s((r=r.apply(e,n||[])).next())}))},i=this&&this.__generator||function(e,n){var t,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(t=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=n.call(e,a)}catch(e){c=[6,e],r=0}finally{t=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}},a=this&&this.__spreadArray||function(e,n,t){if(t||2===arguments.length)for(var r,o=0,i=n.length;o<i;o++)!r&&o in n||(r||(r=Array.prototype.slice.call(n,0,o)),r[o]=n[o]);return e.concat(r||Array.prototype.slice.call(n))};Object.defineProperty(n,"__esModule",{value:!0}),n.initLogPerf=void 0;var c,s=t(9),l=t(5),u=t(0),f=t(1),d=t(2),p=t(6),m=function(){var e;return!(null===window||void 0===window?void 0:window.performance)||!(null===(e=null===window||void 0===window?void 0:window.performance)||void 0===e?void 0:e.getEntriesByName)||d.FMP_KEYS.some((function(e){var n;return null===(n=window.performance)||void 0===n?void 0:n.getEntriesByName(e)[0]}))},g=(new Date).getTime(),v=function(e,n){var t=this;this.getFetchTime=function(e){var n=(0,u.getConfig)("startTiming")||0,r=t.getNavigationTiming(),o=performance.timing.fetchStart-performance.timing.navigationStart;return e-(r[n]||o||0)},this.sendBizReady=function(e){var n=e.time;if(window.dingtalk&&window.dingtalk.platform&&(0,u.compareCurrentVersion)("7.0.0"))try{var t={time:isNaN(parseInt(n))?0:parseInt(n),availableTime:isNaN(parseInt(n))?0:parseInt(n)},r=(new Date).getTime();f.consola.log("notifyBizReady",t),window.dingtalk.platform.invokeAPI(r,"biz.webview.notifyBizReady",t),(0,u.setConfig)("bizReady",!0)}catch(e){f.consola.error("core.api.logBizReady.error",e)}},this.sendUserTimings=function(e,n,r){var o=e.entryType,i=e.name,a=e.startTime,c=e.duration,s=e.detail,l=e.c1,d=e.c2,p=e.c3,m=e.c4,g=e.c5,v=e.c6;switch(void 0===r&&(r=!1),i){case"FMP":case"fmp-custom":var h={p1:a,p2:c,p3:o,p4:i,p5:s,c1:l,c2:d,c3:p,c4:m,c5:g,c6:v};if(t.fmp)return;h.p5||(h.p5=t.getFetchTime(a)),t.fmp=h.p5||h.p1,f.consola.log("fmp",t.fmp),t.hasLoaded?t.sendLog():(0,u.setConfig)("fmp",t.fmp);break;case"fmp-every":var _=s||t.getFetchTime(a);t.fmpEvery=_,(0,u.setConfig)("fmp-every",_),t.send({fmp:_})}switch(!0){case["fmp_t0","fmp_t1","fmp_t2"].includes(i):if(t[i])return;t[i]=s||t.getFetchTime(a),(0,u.setConfig)(i,t[i]);break;case i.includes("fmp_t")||i.includes("Custom_"):if(r&&(t.fmp_once[i]=s||t.getFetchTime(a)),t.fmp_others[i])return;t.fmp_others[i]=s||t.getFetchTime(a),!r&&(0,u.setConfig)(i,s||t.getFetchTime(a)),(0,u.setConfig)("fmp_others",Object.assign({},(0,u.getConfig)("fmp_others"),t.fmp_others))}},this.sendUserTimingsLoaded=function(e,n){e.entryType;var o,i,a=e.name,s=e.startTime;switch(e.duration,e.detail,e.c1,e.c2,e.c3,e.c4,e.c5,e.c6,a){case"fmp-end":if(!(null===window||void 0===window?void 0:window.performance)||!(null===(o=null===window||void 0===window?void 0:window.performance)||void 0===o?void 0:o.getEntriesByName))return;if(!1===(0,u.getConfig)("send")&&!(0,u.checkSamplingWhiteList)())return;var l=(null===(i=window.performance)||void 0===i?void 0:i.getEntriesByName("fmp-start"))||[],f=l.length-1;if(f>=0){var d=l[f];if((c&&c.startTime)!==d.startTime){t.fmpGap=s-l[f].startTime,c=l[f];var p=r(r(r(r({},t.getNavigationTiming()),t.getPaintTiming()),t.getConnection()),{fmpGap:t.fmpGap});t.hasSendPerf=!0,t.logPerf(t.pid,p)}}}},this.sendUserCustomTimings=function(e){var n=e.name,r=e.startTime,o=e.duration,i=e.detail,a=e.c1,c=e.c2,s=e.c3,d=e.c4,p=e.c5,m=e.c6;try{if(n.startsWith("__custom__pull")){var g={p1:r,p2:o,p3:JSON.stringify(i),p4:n,p5:u.ECustomLogType.CUSTOM,c1:a,c2:c,c3:s,c4:d,c5:p,c6:m};(0,l.logCustom)(t.pid,g)}}catch(e){f.consola.error("core.api.logUserCustom.error",e)}},this.parseTags=function(e){if(!e)return{};try{return"string"==typeof e?JSON.parse(e):"object"!=typeof e||Array.isArray(e)?{}:e}catch(e){return f.consola.error("Failed to parse tag configuration:",e),{}}},this.getNavigationTiming=function(){try{var e={startTime:0,unloadEventStart:0,unloadEventEnd:0,redirectStart:0,responseEnd:0,fetchStart:0,domainLookupStart:0,domainLookupEnd:0,connectStart:0,secureConnectionStart:0,connectEnd:0,requestStart:0,responseStart:0,redirectEnd:0,domInteractive:0,domContentLoadedEventStart:0,domContentLoadedEventEnd:0,domComplete:0,loadEventStart:0,loadEventEnd:0};if(window&&window.performance&&"function"==typeof window.performance.getEntriesByType){var n=performance.getEntriesByType("navigation");if(n&&n[0]){var o=n[0];for(var i in e)"startTime"===i?e.startTime=performance.timing.navigationStart||0:e[i]=o[i]||0;t.fmp_others.encodedBodySize=o.encodedBodySize||0,t.fmp_others.transferSize=o.transferSize||0,t.fmp_others.decodedBodySize=o.decodedBodySize||0,(0,u.getConfig)("offline_version")?t.fmp_others.offline_version=(0,u.getConfig)("offline_version"):(0,u.getConfig)("online_version")&&(t.fmp_others.online_version=(0,u.getConfig)("online_version")),t.fmp_others.lang=(0,u.getCurrentLanguage)();var a=t.parseTags((0,u.getConfig)("tags")),c=t.parseTags((0,u.getConfig)("nativeTags"));(0,u.setConfig)("fmp_others",Object.assign({},(0,u.getConfig)("fmp_others"),t.fmp_others,r(r({},c),a)))}}return e}catch(e){f.consola.error("core.api.getNavigationTiming.error",e)}return{}},this.mark=function(e,n){void 0===n&&(n={}),f.consola.log("custom mark",e,n);var r,o,i=parseInt(n.detail,10);if(isNaN(i))performance.mark(e||"FMP");else try{var a={name:e+"",entryType:"mark",startTime:n.startTime||((null===(r=null===u.win||void 0===u.win?void 0:u.win.performance)||void 0===r?void 0:r.now)?performance.now():(null===(o=null===window||void 0===window?void 0:window.performance)||void 0===o?void 0:o.timing)?(new Date).getTime()-performance.timing.navigationStart:(new Date).getTime()-g),duration:0,detail:i};return t.sendUserTimings(a,t.pid),a}catch(e){f.consola.error("core.api.mark.error",e)}},this.getPaintTiming=function(){var e={fp:0,fcp:0};return window&&window.performance&&"function"==typeof window.performance.getEntriesByType&&(performance.getEntriesByType("paint")||[]).forEach((function(n){"first-paint"===n.name&&(e.fp=t.getFetchTime(n.startTime)||0),"first-contentful-paint"===n.name&&(e.fcp=t.getFetchTime(n.startTime)||0)})),e},this.initPerformanceObserver=function(){if(window.PerformanceObserver){var e,n=[];window.PerformanceMark&&n.push("mark"),window.PerformanceMeasure&&n.push("measure"),window.PerformancePaintTiming&&n.push("paint"),window.PerformanceElementTiming&&n.push("element"),window.LargestContentfulPaint&&(n.push("largest-contentful-paint"),e=function(){},document.addEventListener("visibilitychange",(function n(){document.hidden&&(document.removeEventListener("visibilitychange",n,!0),e())}),!0));try{for(var r=0;r<n.length;r++){var o=n[r],i=new PerformanceObserver((function(e){e.getEntries().forEach((function(e){switch(e.entryType){case"mark":case"measure":d.FMP_KEYS.includes(e.name)&&t.sendUserTimings(e,t.pid),d.FMP_KEYS_LOADED.includes(e.name)&&t.sendUserTimingsLoaded(e,t.pid),e.name.startsWith("__custom__pull")&&t.sendUserCustomTimings(e);break;case"paint":"first-contentful-paint"===e.name&&(t.fcp=e.startTime,(0,u.setConfig)("fmp_others",Object.assign({},(0,u.getConfig)("fmp_others"),{fcp:t.fcp})));break;case"largest-contentful-paint":t.lcpTime=e.renderTime||e.loadTime,(0,u.setConfig)("fmp_others",Object.assign({},(0,u.getConfig)("fmp_others"),{lcp:t.lcpTime}))}}))}));try{i.observe({type:o,buffered:!0})}catch(e){i.observe({entryTypes:n});break}}}catch(e){}}},this.getConnection=function(){var e={net_type:"",downlink:""};if(window&&window.navigator&&window.navigator.connection){var n=window.navigator.connection;e.net_type=n.effectiveType||n.type||"",e.downlink=n.downlink||n.downlinkMax||n.bandwidth||""}return e},this.getSystemInfo=function(){try{var e={hasCSSAnimation:window.CSS&&window.CSS.supports&&window.CSS.supports("animation","1s linear infinite"),pixelRatio:window.devicePixelRatio||"",hardwareConcurrency:navigator.hardwareConcurrency||"",deviceMemory:navigator.deviceMemory||"",pluginsLength:navigator.plugins&&navigator.plugins.length},n=performance.memory;n&&(e.totalJSHeapSize=n.totalJSHeapSize/1048576,e.usedJSHeapSize=n.usedJSHeapSize/1048576,e.jsHeapSizeLimit=n.jsHeapSizeLimit/1048576);for(var r=0,o=Object.entries(e);r<o.length;r++){var i=o[r],a=i[0],c=i[1];t.fmp_others[a]=c}(0,u.setConfig)("fmp_others",Object.assign({},(0,u.getConfig)("fmp_others"),t.fmp_others))}catch(e){f.consola.error("core.api.getSystemInfo.error",e)}},this.getAsyncInfo=function(){var e;try{var n=null===(e=null===u.win||void 0===u.win?void 0:u.win.__DINGBASE_CONFIG__)||void 0===e?void 0:e.dcdn_eagleeye_traceid;n&&(0,u.setConfig)("fmp_others",Object.assign({},(0,u.getConfig)("fmp_others"),{dcdnAgleeyeTraceid:n}))}catch(e){f.consola.error("core.api.getCookie.error",e)}},this.getCustomInfo=function(){var e;try{var n=null===(e=null===u.win||void 0===u.win?void 0:u.win.__BIRD_CONFIG)||void 0===e?void 0:e.__custom_data;n&&(0,u.setConfig)("fmp_others",Object.assign({},(0,u.getConfig)("fmp_others"),{__custom_data:n}))}catch(e){f.consola.error("core.api.getChatbox.error",e)}},this.sendMark=function(e,n){var r,o;if(void 0===n&&(n=!1),(null===window||void 0===window?void 0:window.performance)&&(null===(r=null===window||void 0===window?void 0:window.performance)||void 0===r?void 0:r.getEntriesByName)){var i=null===(o=window.performance)||void 0===o?void 0:o.getEntriesByName(e)[0];i&&t.sendUserTimings(i,t.pid,n)}},this.sendExtraFmp=function(){t.fmp_t0||t.sendMark("fmp_t0"),t.fmp_t1||t.sendMark("fmp_t1"),t.fmp_t2||t.sendMark("fmp_t2"),d.FMP_KEYS_OTHERS.map((function(e){t.fmp_others[e]||t.sendMark(e)})),t.sendCustomMark()},this.sendCustomMark=function(e){var n=void 0===e?{}:e,r=n.startEntry,o=void 0===r?"":r,i=n.endEntry,a=void 0===i?"":i;try{var c=Array.from((null===window||void 0===window?void 0:window.performance.getEntriesByType("mark"))||[]);if(0===c.length)return;var s=c;if(o&&a){var l=c.findIndex((function(e){return e.name===a}));if(-1!==l){var u=c.slice(0,l+1).findIndex((function(e){return e.name===o}));s=-1!==u?c.slice(u,l+1):[]}else s=[]}s.filter((function(e){return"mark"===e.entryType||e.name.includes("Custom_")})).forEach((function(e){return t.sendMark(e.name,!(!o||!a))}))}catch(e){console.error("core.api.sendCustomMark.error",e)}},this.sendLog=function(){return o(t,void 0,void 0,(function(){var e,n=this;return i(this,(function(t){switch(t.label){case 0:return e=(0,u.getConfig)("disableReport"),this.hasSendPerf||e?[2]:(this.sendExtraFmp(),this.fmp?[3,1]:(d.FMP_KEYS_FIRST.map((function(e){return n.sendMark(e)})),[3,3]));case 1:return this.hasSendPerf=!0,this.sendBizReady({time:this.fmp+performance.timing.fetchStart}),[4,this.send()];case 2:t.sent(),t.label=3;case 3:return[2]}}))}))},this.getResources=function(){var e,n;try{if(!(null===window||void 0===window?void 0:window.performance)||!(null===(e=null===window||void 0===window?void 0:window.performance)||void 0===e?void 0:e.getEntriesByName)||!(null===(n=null===window||void 0===window?void 0:window.performance)||void 0===n?void 0:n.getEntries))return;var r=null===window||void 0===window?void 0:window.performance.getEntries();if(!r||0===r.length)return;var o=r.filter((function(e){return["script","img","link"].includes(e.initiatorType)||"mark"===e.entryType&&d.FMP_KEYS.includes(e.name)})).map((function(e){var n=e.initiatorType,r=void 0===n?"":n,o=e.entryType,i=e.deliveryType,a=void 0===i?"":i,c=e.name,s=void 0===c?"":c,l=e.responseEnd,u=void 0===l?0:l,f=e.domainLookupStart,d=void 0===f?0:f,p=e.transferSize,m=void 0===p?0:p,g=e.nextHopProtocol,v=void 0===g?"":g,h=e.startTime,_=e.detail,w=e.duration,y=void 0===w?0:w;return"mark"===o?{name:s,start:_||t.getFetchTime(h)}:{deliveryType:a,type:r,url:s,load_time:d?u-d:y,size:m,protocol:v,start:d}}));return JSON.stringify(o.slice(0,100))}catch(e){console.error("core.api.getResources.error",e)}return{}},this.getSendParams=function(){return r(r(r(r(r(r(r({},u.win.__BIRD_perf_data),u.win.__BIRD_CONFIG),t.getNavigationTiming()),t.getPaintTiming()),t.getConnection()),{fmp:t.fmp,os:(0,u.getPlatform)()}),t.fmp_others)},this.limitCall=function(e,n){void 0===e&&(e=10),void 0===n&&(n=1),t.callTimes||(t.callTimes=[]);var r=Date.now();return t.callTimes=t.callTimes.filter((function(e){return r-e<1e3*n})),t.callTimes.length>=e?(f.consola.error("core.send.maximum.call"),!1):(t.callTimes.push(r),!0)},this.send=function(e){return o(t,void 0,void 0,(function(){var n,t,a,c,s,l,m,g,v,h=this;return i(this,(function(_){switch(_.label){case 0:if(!this.limitCall())return[2];_.label=1;case 1:return _.trys.push([1,3,,4]),[4,(0,u.getUid)()];case 2:return _.sent(),[3,4];case 3:return n=_.sent(),f.consola.error("core.api.getUid.error",n),[3,4];case 4:return _.trys.push([4,6,,7]),[4,(0,p.default)((0,u.getPlatform)(),"im","im_bird_full_sls_log")];case 5:return t=_.sent(),[3,7];case 6:return a=_.sent(),f.consola.error("core.full.sls.error",a),[3,7];case 7:if(this.getSystemInfo(),this.getAsyncInfo(),this.getCustomInfo(),c=((0,u.getConfig)("corpIds")||"").split(",").slice(0,20).join(","),s=r(r(r(r(r(r({},this.getNavigationTiming()),this.getPaintTiming()),this.getConnection()),{fmp:this.fmp}),e),{corpIds:c}),(0,u.setPerfData)(r({fcp:s.fcp,fp:s.fp,fmp:this.fmp},e)),!1!==(0,u.getConfig)("send")||(0,u.checkSamplingWhiteList)()||t)try{l=this.getResources(),m=r(r(r(r(r(r(r({},u.win.__BIRD_perf_data),u.win.__BIRD_CONFIG),{pid:this.pid,url:location.href.split("?")[0],os:(0,u.getPlatform)()}),s),e),this.fmp_others),{resources:l,birdVersion:d.BIRD_VERSION,visible:document.visibilityState}),f.consola.track("core.log.perf",m),f.consola.log("send to sls",m)}catch(e){f.consola.error("core.api.logSls.error",e)}return!1!==(0,u.getConfig)("send")||(0,u.checkSamplingWhiteList)()?(this.logPerf(this.pid,s),g=(0,u.getConfig)("corpIds")||[],v=["/chatbox.html"],d.innerGrayList.some((function(e){return g.includes(e)}))&&((0,p.default)((0,u.getPlatform)(),"im","im_bird_show_perf_info_".concat(u.isPC?"pc":"mobile")).then((function(e){e&&v.every((function(e){return-1===location.href.indexOf(e)}))&&h.showPerf(r(r(r({},u.win.__BIRD_CONFIG),u.win.__BIRD_perf_data),s))})),(0,p.default)((0,u.getPlatform)(),"im","im_bird_show_pre_info").then((function(e){return o(h,void 0,void 0,(function(){var n;return i(this,(function(t){switch(t.label){case 0:return[4,(0,u.getDingTalkEnv)()];case 1:return n=t.sent(),!e||"pre"!==u.env&&"pre"!==n||this.showPreInfo(),[2]}}))}))}))),[2]):[2]}}))}))},this.initBirdPerfAdvancedListener=function(){window.addEventListener("bird.perf.advanced",(function(e){void 0===e&&(e={});var n=e.detail,o=n.timeCost,i=void 0===o?0:o,a=n.timeCostFsp,c=void 0===a?0:a;if(!(i<=0)){t.auto_fmp=c>0?(i+c)/2:i,(0,u.setPerfData)({timeCostFsp:c,timeCost:i,auto_fmp:t.auto_fmp}),f.consola.log("perf advanced:",r(r({},e.detail),{auto_fmp:t.auto_fmp}));var l={p1:t.auto_fmp,p2:i,p3:c,p5:u.ECustomLogType.AUTO_FMP};(0,s.logPrefAdvanced)(t.pid,l),t.hasSendPerf||m()||t.fmp||t.fmpEvery||!t.hasLoaded||(t.send({msg:"auto_fmp",fmp:t.auto_fmp}),t.hasSendPerfAuto=!0)}}))},this.showPreInfo=function(){var e='<div style="font-size: 12px;width:100%;justify-content:center; position: fixed;   top: 0; left: 0; color: #dc6464; padding: 2px; z-index: 1000; display: flex;">\n    <div>\n    '.concat("预发环境，仅供开发调试，线上环境页面体验更佳。","\n    </div>\n  </div>");document.body.insertAdjacentHTML("afterbegin",e)},this.showPerf=function(e){var n,t,r,o,i="",a=(e||{}).fmp_others,c=void 0===a?{}:a;for(var s in e)0!==s.indexOf("fmp_t")&&0!==s.indexOf("Custom_")||(i+='<span style="max-width: 100px;min-width: 100px;padding-right:10px;text-overflow: ellipsis;\n        overflow: hidden;">'.concat(s.replace("Custom_",""),": ").concat("").concat(Math.round(e[s]||0),"ms</span>"));var l=document.createElement("div");null===(t=null===(n=document.getElementById("bird-debug-panel"))||void 0===n?void 0:n.remove)||void 0===t||t.call(n),l.id="bird-debug-panel";var f=80,d=0;l.style.cssText="font-size:13px;position: fixed; top: ".concat(f,"px; right: ").concat(d,"px; color: rgba(255, 255, 255, .8);z-index: 99999; display: flex; background-color: rgba(0, 0, 0, 0.75); border-radius: 9px; padding: 0px;line-height: 1.5;max-width: 80%;-webkit-user-select: none"),l.setAttribute("data-show","0");var p=Math.round(e.nativeTotalTime||0),m={browserPreCreated:"预创建",preRendered:"预渲染"},g='<span style="color: red">未接入</span>';e.ctmEnabled&&(g="enable"==e.ctmEnabled||e.ctmVersion?'<span style="color: green">'.concat(e.ctmVersion,"(").concat(c.ctmDevelopVersion,")</span>"):"disable"==e.ctmEnabled?'<span style="color: red">未命中'.concat(e.ctmReason?"(".concat(e.ctmReason,")"):"","</span>"):'<span style="color: green">未命中: '.concat(e.ctmEnabled," ").concat(e.ctmReason||"","</span>"));var v='\n      <div style="display: none;padding:8px">\n        <div style="font-weight: bold">\n          容器'.concat(m[e.renderType]?"(".concat(m[e.renderType],")"):"",':<span style="color: ').concat(p<=100?"green":"red",';">').concat(p>=3e3||p<0?"0":p,'ms </span>，\n          FMP: <span style="color: ').concat(Math.round(e.fmp)<=1e3?"green":"red",';">').concat(Math.round(e.fmp),"ms</span>\n          ").concat(-1===location.href.indexOf("dingtalk-frontend/ding-ai-copilot")?'<div  id="bird-debug-link" style="\n              padding: 2px 4px;\n              background-color: #007bff;\n              color: #ffffff;\n              top: 10px;\n              border-radius: 4px;\n              cursor: pointer;\n              position: absolute;\n              right: 10px;\n              font-size: 12px;\n            " >\n            时序图\n        </div>':"",'\n        </div>\n        <div style="font-weight: bold">\n          FCP: <span style="color: ').concat(Math.round(e.fcp)<=300?"green":"red",';">').concat(Math.round(e.fcp),"ms</span>，\n          离线包: ").concat(g,' \n        </div>\n        <div style="margin-top: 3px;">\n          requestStart: ').concat(Math.round(e.requestStart),"ms,\n          responseEnd: ").concat(Math.round(e.responseEnd),"ms,\n          domReady: ").concat(Math.round(e.domContentLoadedEventEnd),"ms<br /> \n          ").concat("enable"===e.ctmEnabled&&e.ctmVersion?"\n          离线包资源命中: ".concat(e.ctmHitRate,"%(").concat(e.ctmLocal,"/").concat(e.ctmTotal,")\n          "):"","\n          资源version: ").concat(e.version||"","(").concat(e.online_version?"线上":"").concat(e.offline_version?"离线":"",")<br />\n          ").concat(i?'<div style="display: flex; flex-wrap: wrap; margin-top: 3px; max-width: 410px;">'.concat(i,"</div>"):"",'\n        </div>\n      </div>\n      <div class="bird-debug-panel-arrow" style="font-weight: bold; white-space:nowrap; cursor: move;padding: 8px;">\n        FMP: <span style="color: ').concat(Math.round(e.fmp)<=1e3?"green":"red",';">').concat((Math.round(e.fmp)/1e3).toFixed(1),"s</span>\n      </div>");l.innerHTML=v,document.body.insertBefore(l,document.body.firstChild),null===(r=document.querySelector("#bird-debug-link"))||void 0===r||r.addEventListener("click",(function(n){n.stopPropagation();var t="https://".concat("pre"===u.env?"pre-":"","n.dingtalk.com/dingding/performance-graph/mpa-demo/index.html?os=").concat((0,u.getPlatform)(),"&from=").concat(e.startTime,"&to=").concat(Date.now(),"&url=").concat(encodeURIComponent(location.href.split("?")[0]),"&uid=").concat((0,u.getConfig)("uid"),"&startTime=").concat(e.startTime,"&dd_progress=false");u.isPC?window.open("dingtalk://dingtalkclient/page/link?web_wnd=general&width=800&height=600&title=时序图&url=".concat(encodeURIComponent(t))):u.isMobile&&window.open("https://applink.dingtalk.com/page/link?url=".concat(encodeURIComponent(t),"&target=panel&navTranslucent=true"))}));var h=l.querySelector(".bird-debug-panel-arrow"),_=l.firstElementChild,w=!1;null==h||h.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),w||(_.style.display="block",h&&(h.style.display="none"))})),/bird_debug=1/.test(location.href)&&(_.style.display="block");var y="onpointerdown"in l?"pointer":"mouse";null==h||h.addEventListener("".concat(y,"down"),(function(e){var n;e.preventDefault(),w=!1,e.pointerId&&h.setPointerCapture&&h.setPointerCapture(e.pointerId),l.style.transition="none",null===(n=window.getSelection())||void 0===n||n.removeAllRanges();var t=e.pageX,r=e.pageY,o=function(e){var n;e.preventDefault();var o={x:e.pageX-t,y:e.pageY-r};(Math.abs(o.x)>3||Math.abs(o.y)>3)&&(w=!0,l.style.top=Math.min(Math.max(0,o.y+f),window.innerHeight-l.clientHeight)+"px",l.style.right=Math.min(Math.max(d-o.x,0),window.innerWidth-l.clientWidth)+"px",null===(n=window.getSelection())||void 0===n||n.removeAllRanges())},i=function(e){e.pointerId&&h.releasePointerCapture&&h.releasePointerCapture(e.pointerId);var n={x:e.pageX-t,y:e.pageY-r};(Math.abs(n.x)>3||Math.abs(n.y)>3)&&(f=Math.min(Math.max(0,n.y+f),window.innerHeight-l.clientHeight),d=Math.min(Math.max(d-n.x,0),window.innerWidth-l.clientWidth),l.style.top=f+"px",l.style.right=d+"px",l.style.transition="all .3s",requestAnimationFrame((function(){d=0,l.style.right=d+"px"}))),requestAnimationFrame((function(){w=!1})),h.removeEventListener("".concat(y,"move"),o),h.removeEventListener("".concat(y,"up"),i)};h.addEventListener("".concat(y,"move"),o),h.addEventListener("".concat(y,"up"),i)})),null===(o=document.body)||void 0===o||o.addEventListener("click",(function(e){_.style.display="none",h&&(h.style.display="block")}))},this.executeSend=function(){return o(t,void 0,void 0,(function(){var e;return i(this,(function(n){switch(n.label){case 0:f.consola.log("load"),n.label=1;case 1:return n.trys.push([1,3,,4]),this.hasLoaded=!0,[4,this.sendLog()];case 2:return n.sent(),this.hasSendPerf||m()||this.fmp||this.fmpEvery?[2]:(!this.hasSendPerfAuto&&this.auto_fmp&&this.send({msg:"auto_fmp",fmp:this.auto_fmp}),[3,4]);case 3:return e=n.sent(),f.consola.error("core.api.sendLog.error",e),[3,4];case 4:return[2]}}))}))},this.sendRunTimePerf=function(e){console.log("🚀 ~ Perf ~ params:"),t.sendCustomMark(e);var n=t.getSendParams();try{for(var o in f.consola.track("core.log.perf_sub",r({birdVersion:d.BIRD_VERSION},n)),t.fmp_once)delete t.fmp_others[o];(0,u.setConfig)("fmp_others",Object.assign({},t.fmp_others)),t.fmp_once={}}catch(e){}},this.init=function(){u.win.__BIRD=r(r({},u.win.__BIRD),{mark:t.mark,send:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];f.consola.log.apply(f.consola,a(["send invoked"],e,!1)),t.sendExtraFmp(),t.send.apply(t,e)},sendRunTimePerf:t.sendRunTimePerf}),f.consola.log("mount mark,send",u.win.__BIRD),t.initPerformanceObserver(),t.initBirdPerfAdvancedListener(),window.addEventListener&&window.addEventListener("load",(function(){return o(t,void 0,void 0,(function(){var e,n=this;return i(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),null!==this.fcp?(setTimeout((function(){n.executeSend()}),50),[2]):[4,new Promise((function(e){setTimeout(e,300)}))];case 1:return t.sent(),this.executeSend(),[3,3];case 2:return e=t.sent(),f.consola.error("core.api.collection.error:",e),[3,3];case 3:return[2]}}))}))}),!0),"complete"===document.readyState&&(t.hasSendPerf||t.hasLoaded||t.executeSend())},this.hasSendPerf=!1,this.hasSendPerfAuto=!1,this.logPerf=e,this.hasLoaded=!1,this.lcpTime=null,this.pid=n,this.fmp=null,this.fmp_t0=null,this.fmpEvery=null,this.fmp_t1=null,this.auto_fmp=null,this.fmp_t2=null,this.fmp_others={},this.fmp_once={},this.fmpGap=null,this.longTask=[],this.callTimes=[]};n.initLogPerf=function(e){try{new v(s.logPerf,e).init()}catch(e){f.consola.error("core.api.logPerf.error",e)}}},function(e,n,t){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e}).apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0}),n.logPrefAdvanced=n.logPerf=void 0;var o=t(3),i=t(0),a=t(2),c=t(1),s=function(e,n,t){void 0===t&&(t=i.ELogType.PERF);var c=(0,i.mergeConfig)(n);for(var s in a.LOG_MAP)c[s]?a.LOG_MAP_STRINGIFY.includes(s)?c[s]=JSON.stringify(c[s]):c[s]="".concat(c[s]):a.LOG_MAP_BLANK.includes(s)?c[s]="":c[s]="0";(0,o.log)(t,(0,i.serializeLog)(a.LOG_MAP,r({pid:e},c)))};n.logPerf=function(e,n){try{s(e,n)}catch(e){c.consola.error("core.api.sendPerfLog.error",e)}};n.logPrefAdvanced=function(e,n){try{s(e,n,i.ELogType.CUSTOM)}catch(e){console.error("core.api.sendLogPrefAdvanced.error",e)}}},function(e,n,t){"use strict";function r(e){var n=e.message.match(/Uncaught (\w+):/);return n&&n[1]?n[1]:e.error_type?e.error_type:e.name?e.name:""}function o(e){var n=e.message,t=void 0===n?"":n,o=e.lineno,i=e.colno,a=e.stack,c=e.error;return{msg:t||e.msg||"",lineno:o,colno:i,file:e.filename||e.file||"",stack:c&&c.stack||a,errType:e.errType||r(e)||"",errCode:e.errCode||e.error_code}}Object.defineProperty(n,"__esModule",{value:!0}),n.processUnhandleDrejection=n.processCommonError=void 0,n.processCommonError=function(e,n,t,r,i){return o(e)},n.processUnhandleDrejection=function(e){if(e)try{var n="",t=0,r=0,i="",a="";"string"==typeof e?n=e:"object"==typeof e.reason?n=e.reason.message:"string"==typeof e.message&&(n=e.message);var c=e.reason;if("object"==typeof c){if("number"==typeof c.column)r=c.column,t=c.line;else if(c.stack){(s=c.stack.match(/at\s+.+:(\d+):(\d+)/))&&(t=s[1],r=s[2])}if(c.sourceURL)i=c.sourceURL;else if(c.stack){var s;(s=c.stack.match(/at\s+(.+):\d+:\d+/))&&(i=s[1])}c.stack&&(a=c.stack)}return o({message:n,filename:i,lineno:t,colno:r,stack:a,error_type:e.constructor.name})}catch(e){}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t(12),o=t(13);n.default={fetchH5PcUserInfo:r.default,fetchH5MobileUserInfo:o.default}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t(0),o=t(1);n.default=function(){return new Promise((function(e,n){var t={};void 0!==r.win.dingtalk&&r.win.dingtalk.my&&r.win.dingtalk.my.getProfileExtension?(r.win.dingtalk.my.getProfileExtension((function(n,r){if(r){var i=r.userProfileModel,a=void 0===i?{}:i,c=a.uid,s=void 0===c?"":c,l=a.nick,u=void 0===l?"":l;s&&(t.dt_uid=s,t.name=u),o.consola.log("dingtalk.my.getProfileExtension",t),e(t)}else e({})})),setTimeout((function(){e({})}),2e3)):e(t)}))}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t(1),o=t(0);n.default=function(){return new Promise((function(e,n){var t=(0,o.getBridge)(),i={};t("internal.user.getCurrentUserInfo",{}).then((function(n){var t=n||{},o=t.uid,a=t.name;r.consola.log("internal.user.getCurrentUserInfo",n),o&&(i.dt_uid=o,i.name=a),e(i)}),(function(e){r.consola.error("internal.user.getCurrentUserInfo",e)}))}))}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t(15),o=t(16);n.default={fetchH5MobileUserOpenInfo:o.default,fetchH5PcUserOpenInfo:r.default}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t(0);n.default=function(){return(0,r.createDingtalkApiCall)({apiName:"biz.user.get",processResult:r.getUserInfoOpen})}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t(1),o=t(0);n.default=function(){return new Promise((function(e,n){(0,o.getBridge)()("biz.user.get",{}).then((function(n){e((0,o.getUserInfoOpen)(n))}),(function(e){r.consola.error("biz.user.get",e),n(e)}))}))}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t(18),o=t(19);n.default={fetchH5PcUserOrg:r.default,fetchH5MobileUserOrg:o.default}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t(0);n.default=function(){return(0,r.createDingtalkApiCall)({apiName:"internal.user.allOrganizations",processResult:r.getNativeOrgMap})}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t(1),o=t(0);n.default=function(){return new Promise((function(e,n){(0,o.getBridge)()("internal.user.allOrganizations",{}).then((function(n){var t=(0,o.getNativeOrgMap)(n);r.consola.log("internal.user.allOrganizations",n,t),e(t)}),(function(e){r.consola.error("internal.user.allOrganizations",e)}))}))}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.h5IosBridgeInit=void 0;var r,o=t(1);n.h5IosBridgeInit=function(){return r||(r=new Promise((function(e,n){if("undefined"!=typeof WebViewJavascriptBridge){try{WebViewJavascriptBridge.init((function(e,n){}))}catch(e){return o.consola.error("core.ios.bridge.error",e),n()}return e({})}document.addEventListener("WebViewJavascriptBridgeReady",(function(){if("undefined"==typeof WebViewJavascriptBridge)return n();try{WebViewJavascriptBridge.init((function(e,n){}))}catch(e){return o.consola.error("core.ios.bridge.error",e),n()}return e({})}),!1)}))),r};n.default=function(e,t){return r||(r=(0,n.h5IosBridgeInit)()),r.then((function(){var n=Object.assign({},t);return new Promise((function(t,r){if(!0===n.watch){var i=n.onSuccess;delete n.onSuccess,"undefined"!=typeof WebViewJavascriptBridge&&WebViewJavascriptBridge.registerHandler(e,(function(e,n){"function"==typeof i&&i.call(null,e),n&&n({errorCode:"0",errorMessage:"success"})}))}void 0!==window.WebViewJavascriptBridge&&window.WebViewJavascriptBridge.callHandler(e,Object.assign({},n),(function(e){var i=e||{};"0"===i.errorCode?("function"==typeof n.onSuccess&&n.onSuccess.call(null,i.result),t(i.result)):("-1"===i.errorCode&&"function"==typeof n.onCancel?n.onCancel.call(null,i.result,i.errorCode):"function"==typeof n.onFail&&n.onFail.call(null,i.result,i.errorCode),o.consola.error("core.ios.bridge.error"),r(i.result))}))}))}))}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.h5AndroidbridgeInit=void 0;var r,o=t(1);n.h5AndroidbridgeInit=function(){return r||(r=new Promise((function(e,n){var t=function(){try{window.WebViewJavascriptBridgeAndroid=window.nuva&&window.nuva.require(),e({})}catch(e){o.consola.error("core.android.bridge.error",e),n(e)}};window.nuva&&(void 0===window.nuva.isReady||window.nuva.isReady)?t():(document.addEventListener("runtimeready",(function(){t()}),!1),document.addEventListener("runtimefailed",(function(e){var t=e&&e.detail||{errorCode:"2",errorMessage:"unknown nuvajs bootstrap error"};o.consola.error("core.android.bridge.error",e),n(t)}),!1))}))),r};n.default=function(e,t){return r||(r=(0,n.h5AndroidbridgeInit)()),r.then((function(){return new Promise((function(n,r){var i=e.split("."),a=i.pop()||"",c=i.join(".");"function"==typeof window.WebViewJavascriptBridgeAndroid&&window.WebViewJavascriptBridgeAndroid((function(e){"function"==typeof t.onSuccess&&t.onSuccess(e),n(e)}),(function(e){"function"==typeof t.onFail&&t.onFail(e),o.consola.error("core.android.bridge.error",e),r(e)}),c,a,t)}))}))}},function(e,n,t){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e}).apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0}),n.logArms=void 0;var o=t(0),i=t(2),a=i.BIRD_VERSION;n.logArms=function(e,n){!function(e,n){try{var t=(0,o.toQueryParams)(n),r=e===o.ELogType.PERF?"https://gm.mmstat.com/arms.1.2":"https://gm.mmstat.com/arms.1.1";if("object"==typeof window.navigator&&"function"==typeof window.navigator.sendBeacon)try{window.navigator.sendBeacon(r,JSON.stringify({gmkey:"OTHER",gokey:t,logtype:"2"}))}catch(e){(new Image).src="".concat(r,"?").concat(t)}else(new Image).src="".concat(r,"?").concat(t)}catch(e){}}(e,r(r({},n),{sdk_version:a}))}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.initLogError=void 0;var r=t(1),o=t(24),i=t(0),a=t(25),c=function(e,n,t,o){try{if("object"!=typeof o||!o)return;if(Array.isArray(t)&&((0,i.ignoreByRule)(o.message,o,t)||(0,i.ignoreByRule)((0,i.decode)(o.message),o,t)))return;var a=o.type;if("error"===a||"unhandledrejection"===a){var c=o.target||o.srcElement,l=(0,i.processError)(o);if(l.stack&&l.stack.slice&&"string"==typeof l.stack&&(l.stack,l.stack.slice(0,1e3)),"unhandledrejection"===a&&(0,i.isType)(o.reason,"Error")&&(0,i.checkAutoError)(o.reason))return void s(e,n,l);if("error"===a){if(!(!c||!c.tagName||o.message||o.filename||o.lineno||o.colno))return;s(e,n,l)}}}catch(e){r.consola.error("core.api.sendError.error",e)}},s=function(e,n,t){e&&(r.consola.log("error:",t),(0,o.logError)(e,t)),(0,i.executeWithIntervalSync)(a.logBlank,{errorPid:e,pid:n,type:"error",info:JSON.stringify(t),snapshot:"string"==typeof document.body.innerHTML?JSON.stringify(document.body.innerHTML.slice(0,1e3)):""})};n.initLogError=function(e,n,t){try{(0,i.bindEvent)(window,"unhandledrejection",c.bind(window,e,n,t)),(0,i.bindEvent)(window,"error",c.bind(window,e,n,t))}catch(e){r.consola.error("core.api.initLogError.error",e)}}},function(e,n,t){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,c)}s((r=r.apply(e,n||[])).next())}))},i=this&&this.__generator||function(e,n){var t,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(t=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=n.call(e,a)}catch(e){c=[6,e],r=0}finally{t=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}};Object.defineProperty(n,"__esModule",{value:!0}),n.logError=void 0;var a=t(3),c=t(0),s=t(1),l=t(2);n.logError=function(e,n){try{try{s.consola.track("core.log.error",r(r(r(r({},c.win.__BIRD_perf_data),c.win.__BIRD_CONFIG),{birdVersion:l.BIRD_VERSION}),n))}catch(e){s.consola.error("core.api.logSlsError.error",e)}!function(e,n){o(void 0,void 0,void 0,(function(){var t,o;return i(this,(function(i){switch(i.label){case 0:return[4,(0,c.getUid)()];case 1:for(o in i.sent(),t=(0,c.mergeConfig)(n),l.LOG_MAP_ERROR)t[o]&&(t[o]=encodeURIComponent("".concat(t[o])));return(0,a.log)(c.ELogType.ERROR,(0,c.serializeLog)(l.LOG_MAP_ERROR,r({pid:e},t))),[2]}}))}))}(e,n)}catch(e){console.error("core.api.logErrorApi.error",e)}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.logBlank=void 0;var r=t(5),o=t(0),i=t(1);n.logBlank=function(e){var n=e.errorPid,t=e.pid,a=e.type,c=e.info,s=void 0===c?"":c,l=e.snapshot;try{return!!(0,o.checkBlank)()&&((0,r.logCustom)(t,{p1:Date.now(),p2:Date.now()-performance.timing.fetchStart,p4:a,p5:o.ECustomLogType.BLANK,p6:s,p7:l,p8:n}),!0)}catch(e){return i.consola.error("core.api.getBlankInfo.error",e),!1}}},function(e,n,t){"use strict";var r=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,c)}s((r=r.apply(e,n||[])).next())}))},o=this&&this.__generator||function(e,n){var t,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(t=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=n.call(e,a)}catch(e){c=[6,e],r=0}finally{t=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}};Object.defineProperty(n,"__esModule",{value:!0}),n.initLogNative=void 0;var i=t(1),a=t(0),c=t(27),s=t(30),l=t(2);n.initLogNative=function(e){return r(void 0,void 0,void 0,(function(){var e;return o(this,(function(n){try{!a.isDingTalkRuntime||(0,a.pageAccessedByReload)()&&"pre"!==a.env||!(0,a.inWhitelist)(location.href)||(e=(0,a.getPlatform)(),i.consola.log("platform:",e),(0,a.compareCurrentVersion)("6.0.15")&&function(e){var n={},t=l.FetchNativeTimeMethods[e];"function"==typeof c.default[t]&&c.default[t]().then((function(e){n=e||{},Object.keys(n).forEach((function(e){var t;if(void 0!==e&&void 0!==n[e]){var r=n[e];i.consola.log(e,r),l.EXTRA_OTHERS_KEY.includes(e)?(0,a.setConfig)("fmp_others",Object.assign({},(0,a.getConfig)("fmp_others"),((t={})[e]=n[e],t))):(0,a.setConfig)(e,r)}}))}))}(e),(0,a.compareCurrentVersion)("6.5.10")&&function(e){var n={},t=l.FetchNativeInfoMethods[e];"function"==typeof s.default[t]&&s.default[t]().then((function(e){n=e||{},Object.keys(n).forEach((function(e){var t;if(void 0!==e&&void 0!==n[e]){var r=n[e];i.consola.log(e,r),l.EXTRA_OTHERS_KEY.includes(e)?(0,a.setConfig)("fmp_others",Object.assign({},(0,a.getConfig)("fmp_others"),((t={})[e]=n[e],t))):(0,a.setConfig)(e,r)}}))}))}(e))}catch(e){i.consola.error("core.api.logNative.error",e)}return[2]}))}))}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t(28),o=t(29);n.default={fetchH5PcNativeTime:r.default,fetchH5MobileNativeTime:o.default}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t(0),o=t(1);n.default=function(){return new Promise((function(e,n){var t={};void 0!==r.win.dingtalk&&r.win.dingtalk.util&&r.win.dingtalk.util.getWebviewContext?r.win.dingtalk.util.getWebviewContext((function(n,r){o.consola.log("nativeTimeRes",r);var i=r||{},a=i.beforeNavigateTime,c=void 0===a?"":a,s=i.finalRedirectTime,l=void 0===s?"":s,u=i.initEndTime,f=void 0===u?"":u,d=i.initStartTime,p=void 0===d?"":d,m=i.preRendered,g=i.browserPreCreated,v=i.timeline,h=i.lowEndDevice,_=Number(c),w=Number(l),y=Number(p),b=Number(f);void 0!==h&&(t.lowEndDevice=h),_&&(t.beforeNavigateTime=_),v&&(t.timeline=v),_&&w&&(t.finalRedirectTime=l,t.redirectTime=w-_),y&&b&&(t.initStartTime=p,t.initEndTime=f,m?(t.prerender=!0,t.nativeNavigateTime=1,t.renderType="preRendered"):g?(t.renderType="browserPreCreated",t.precreate=!0,t.nativeNavigateTime=t.beforeNavigateTime-y):t.nativeNavigateTime=performance.timing.navigationStart-y),_&&y&&b&&(t.nativeTotalTime=t.nativeNavigateTime+t.redirectTime),e(t)})):e(t)}))}},function(e,n,t){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e}).apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0});var o=t(1),i=t(0);n.default=function(){return new Promise((function(e,n){var t={},a=(0,i.getBridge)();a("runtime.monitor.getLoadTime",{type:"RuntimeLaunchTime"}).then((function(e){var n=(e||{}).time;o.consola.log("---result: runtime.monitor.getLoadTime.RuntimeLaunchTime---",performance.now(),e),n&&(t.RuntimeLaunchTime=n)}),(function(e){o.consola.error("runtime.monitor.getLoadTime.RuntimeLaunchTime",e)})),a("runtime.monitor.getBizTimestamps",{}).then((function(n){var i=(t=r(r({},t),n))||{},a=i.initStartTime,c=(i.initEndTime,i.timeline),s=i.tags;o.consola.log("---result: runtime.monitor.getBizTimestamps---",performance.now(),t),t.nativeTotalTime=performance.timing.navigationStart-a,t.timeline=c,t.nativeTags=s,delete t.tags,e(t)}),(function(e){o.consola.error("runtime.monitor.getBizTimestamps",e)}))}))}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t(31),o=t(32);n.default={fetchH5PcResourceInfo:r.default,fetchH5MobileResourceInfo:o.default}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t(0);n.default=function(){return(0,r.createDingtalkApiCall)({apiName:"biz.resource.getInfo",processResult:r.getNativeInfoMap})}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t(1),o=t(0),i=t(0);n.default=function(){return new Promise((function(e,n){var t=(0,o.getBridge)(),a={};t("biz.resource.getInfo",{type:"bizResourceGetInfo",resource_list:!0}).then((function(n){a=(0,i.getNativeInfoMap)(n),r.consola.log("biz.resource.getInfo",n,a),e(a)}),(function(e){r.consola.error("biz.resource.getInfo",e)}))}))}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.initLogPerfAdvanced=void 0;var r=t(1),o=t(0),i=t(34);n.initLogPerfAdvanced=function(e){try{((0,o.inAutoFmpWhitelist)(location.href)||(0,o.getConfig)("autoFmp"))&&i.default.install()}catch(e){r.consola.error("core.api.logPrefAdvanced.error",e)}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t(1);n.default=function(){var e=[],n=screen.width*screen.height,t=null,o=!1,i=!1,a=null,c=["SCRIPT","LINK","SVG","IMG","VIDEO"],s=[],l=[{node:0}];function u(e){cancelAnimationFrame(a),a=requestAnimationFrame((function(){var e=l[l.length-1],n=document.all.length;l.push({node:n,time:performance.now(),ratio:(n-e.node)/Math.max(1,document.body.clientHeight/screen.height)})}));var n=[];E(e,(function(e){E(e.addedNodes,(function(e){1===e.nodeType&&n.push(e)}))})),n.length>0&&h(n.concat([]))}var f=null;function d(e){try{if(o)return;i=!0,t&&clearTimeout(t),f.disconnect(),f.takeRecords(),setTimeout((function(){o=!0,y(e)}),1e3)}catch(e){r.consola.error("core.log.removeListener.error",e)}}var p=function(){};function m(n,t){var r=0===e.length,o=screen.width,i=screen.height,a=document.documentElement,c=a?Math.min(a.clientHeight,i):i,s=a?Math.min(a.clientWidth,o):o,l=n.left+n.width,u=n.top+n.height,f=Math.round(.02*Math.min(o,i)),d=Math.round(.05*i);return r?n.width>=t||n.height>=t?f:l>=f&&s-n.left>=f&&u>=d&&c-n.top>=d:n.width>=2*f&&n.height>=2*f&&l>=d&&s-n.left>=d&&u>=d&&c-n.top>2*d}function g(e,n,t){var r=t||0;return E(e,(function(e){r=n(e,r)})),r}function v(e){var n=function(){try{e.lastTime=Math.max(b(),e.lastTime),e.c=document.getElementsByTagName("*").length,_()}catch(e){r.consola.error("core.log.updateLastTime.error",e)}};window.requestAnimationFrame?requestAnimationFrame(n):setTimeout(n,0)}function h(t){var r=b(),i={createTime:r,lastTime:r,wait:0,piece:[],v:0,c:document.getElementsByTagName("*").length};E(t,(function(e){(function(e){for(var n=s.length,t=null,r=0;r<n;r++)if((t=s[r])&&t.contains&&t.contains(e))return!0;return!!e.hasAttribute("ignoreFspCollection")&&(s.push(e),!0)})(e)||function(e,t,r){var i=e.piece,a=document.documentElement.scrollTop||window.pageYOffset||document.body&&document.body.scrollTop||0,s=document.documentElement.scrollLeft||window.pageXOffset||document.body&&document.body.scrollLeft||0,l=r?null:t.getBoundingClientRect(),u=r||{type:0,className:"",top:l.top+a,left:l.left+s,width:l.width,height:l.height},f=t.offsetParent;f&&f.offsetWidth<f.scrollWidth&&(u.width=Math.min(f.offsetWidth,u.width)),f&&f.offsetHeight<f.scrollHeight&&(u.height=Math.min(f.offsetHeight,u.height));var d=t.tagName;if(-1!=c.indexOf(d.toUpperCase())&&(!1,"IMG"===d)){var p=0;if(u.width=Math.max(u.width,1),u.height=Math.max(u.height,1),u.type=1,m(u)){e.wait+=1,t.addEventListener("load",(function r(){if(o)t.removeEventListener("load",r,!0);else{p++,e.wait-=1;var i=t.getBoundingClientRect(),a=b();m(u,!0)&&(p<=1||a<=1e3)?(u.width=i.width,u.height=i.height,e.lastTime=Math.max(a,e.lastTime),u.size=i.width*i.height,u.v=u.size/n,e.v=g(e.piece,(function(e,n){return e.v+n}),0),v(e)):_()}}),!0),t.addEventListener("error",(function n(){o?t.removeEventListener("error",n,!0):(e.wait-=1,m(u)?(e.lastTime=Math.max(b(),e.lastTime),0===e.wait&&(e.v=g(e.piece,(function(e,n){return e.v+n}),0),v(e))):_())}),!0)}}var h={};if(window.getComputedStyle&&("none"===(h=window.getComputedStyle(t,null)).display||"fixed"===h.position))return!1,i;if(m(u)){var w=h.backgroundImage||"",y=/url\(['"]?(.*?)['"]?\)/i;if(y.test(w)&&(w=w.replace(y,"$1"),!/^data:/i.test(w))){e.wait+=1;var E=document.createElement("img");E.onload=function(){e.wait-=1,e.lastTime=Math.max(b(),e.lastTime),0===e.wait&&v(e)},E.src=w}(function(e,n){var t=null;for(var r in e)if(t=e[r],n.top>=t.top&&n.left>=t.left&&n.top+n.height<=t.top+t.height&&n.left+n.width<=t.left+t.width)return!0;return!1})(i,u)||(u.size=u.width*u.height,u.v=u.size/n,e.v+=u.v,u.size?i.push(u):!1)}}(i,e)})),i.piece.length>0&&(e.push(i),v(i))}function _(){if(!i&&!o){t&&clearTimeout(t),t=setTimeout((function(){d()}),3e3);for(var n=null,r=null,a=0,c=0,s=0,l=0,u=0,f=e.length-1;f>1;f--){if(n=e[f],r=e[f-1],l=Math.floor(100*n.v)/100,c=(u=Math.floor(100*r.v)/100)?Math.abs(l-u)/u:0,(s+=Math.min(n.v,1))>4){d();break}if(c<.5){if(++a>6){d();break}}else a>0&&(a=0)}}}var w=0;function y(n){try{n&&(o=!0);var t=e.length;if(0===t)return;var i=[],a=[],c=[],s=-1,u=0,f=0,m=0;for(a=(m=function(e,n,t){void 0===n&&(n=.1),void 0===t&&(t=3);var r=e.length-1,o=0;do{var i=e[r],a=e[r-1];if(!(Math.abs(i-a)/i<n))break;o++,r--}while(r>0);return o>=t&&r>0?Math.min(r,e.length-1):e.length-1}(e.map((function(e){return Math.floor(100*e.v)/100}))))>0?e.slice(0,t+2):e;a.length>0;)if(s=a[0].lastTime,u=a[0].c,c=[],f=0,m=0,E(a,(function(e){f+=e.v,m++,e.createTime<=s+200&&(s=Math.max(s,e.lastTime),u=Math.max(u,e.c)),e.lastTime>s&&c.push(e)})),a=c,f<.02||f/m<.01?w++:w=0,i.push([s,u]),w>=3){i.splice(i.length-3),d();break}var g=i.length-1;0!==w&&g>=w&&(g-=w),g=i[g];var v=null,h=null,_=null;u=null;try{g&&(v=g[0],u=g[1],_=performance.timing.navigationStart+v,h=function(){if(!l[1])return 0;if(!l[2])return l[1].time;if(!l[3])return l[2].time;var e=l[1].ratio+l[2].ratio+l[3].ratio;l.length>3&&(e=0);for(var n=0,t=2,o=l.length;t<o;t++){var i=l[t-2].ratio+l[t-1].ratio+l[t].ratio;i>e&&(n=l[t].time,e=i)}return r.consola.log("fsp:",n),n}()),p&&p(_,v,h,u),function(e,n,t,r){if(window.dispatchEvent&&window.CustomEvent){var o=new CustomEvent("bird.perf.advanced",{detail:{timeCost:n,timeCostFsp:t,timestamp:e,domLen:r}});window.dispatchEvent(o)}}(_,v,h,u)}catch(e){r.consola.error("core.log.decision.sfsp.error",e)}}catch(e){r.consola.error("core.log.decision.error",e)}}function b(){return performance.now()}function E(e,n){if(Array.prototype.forEach)Array.prototype.forEach.call(e,n);else for(var t=e.length,r=0;r<t;r++)n(e[r],r)}return{install:function(){!function(){if(window.performance&&window.MutationObserver){(f=new MutationObserver(u)).observe(document.documentElement,{childList:!0,subtree:!0}),h(document.querySelectorAll("BODY > *")),setTimeout((function(){d(!0)}),1e4)}}()},onReport:function(e){e&&"function"==typeof e&&(p=e)},forceStop:function(){y(!0)}}}()},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t(1),o=t(0);n.default=function(){var e={},n=JSON.stringify([{tenantId:"dingding",type:"app",objectType:1001,resourceUrl:location.protocol+"//"+location.hostname+location.pathname}]),t="/r/Adaptor/ResourceSyncI/recordByUrl",i=(0,o.getPlatform)();return new Promise((function(a,c){try{if("win"===i||"mac"===i)o.win.dingtalk&&o.win.dingtalk.net&&o.win.dingtalk.net.rpc&&o.win.dingtalk.net.rpc(t,e,n,(function(e,n){e?r.consola.error("dingtalk.net.rpc ".concat(t," error"),e):n&&r.consola.log("dingtalk.net.rpc ".concat(t),n)}));else if("ios"===i||"android"===i){(0,o.getBridge)()("internal.request.lwp",{uri:t,headers:e,body:n}).then((function(e){r.consola.log("internal.request.lwp ".concat(t),e),a(e)}),(function(e){r.consola.error("internal.request.lwp ".concat(t),e)}))}}catch(e){r.consola.error("fetchUploadVisit ".concat(t," error"),e)}}))}}]);